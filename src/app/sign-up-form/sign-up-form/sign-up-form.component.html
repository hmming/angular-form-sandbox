<div class="sign-up-form">
  <form
    [formGroup]="signUpForm"
    class="sign-up-form__container"
    (submit)="onSubmit()"
  >
    <h1>Sign up:</h1>
    <mat-form-field
      id="firstName"
      class="sign-up-form__field"
      appearance="outline"
    >
      <mat-label> First name </mat-label>
      <input matInput [formControl]="firstName" />
      <mat-error *ngIf="firstName.touched && firstName.invalid">
        <span *ngIf="firstName.errors?.['required']"
        >This field is mandatory.</span
        >
      </mat-error>
    </mat-form-field>

    <mat-form-field
      id="lastName"
      class="sign-up-form__field"
      appearance="outline"
    >
      <mat-label> Last name </mat-label>
      <input matInput [formControl]="lastName" />
      <mat-error *ngIf="lastName.touched && lastName.invalid">
        <span *ngIf="lastName.errors?.['required']"
        >This field is mandatory.</span
        >
      </mat-error>
    </mat-form-field>

    <mat-form-field id="email" class="sign-up-form__field" appearance="outline">
      <mat-label> E-mail </mat-label>
      <input matInput [formControl]="email" required />
      <mat-error *ngIf="email.touched && email.invalid">
        <span *ngIf="email.errors?.['required']">This field is mandatory.</span>
        <span *ngIf="email.errors?.['emailValidation']"
        >Email is incorrect.</span
        >
      </mat-error>
    </mat-form-field>

    <mat-form-field
      id="password"
      class="sign-up-form__field"
      appearance="outline"
    >
      <mat-label> Password </mat-label>
      <input matInput [formControl]="password" type="text" />
      <mat-error *ngIf="password.touched && password.invalid">
        <span
          *ngIf="password.errors?.['required']"
          class="sign-up-form__field-error-message"
        >This field is mandatory.</span
        >
        <span
          *ngIf="password.errors?.['minlength']"
          class="sign-up-form__field-error-message"
        >Minimum of 8 characters.</span
        >
        <span
          *ngIf="password.errors?.['pattern']"
          class="sign-up-form__field-error-message"
        >Password requires upper and lower case characters.</span
        >
        <span
          *ngIf="password.errors?.['passwordChecks']"
          class="sign-up-form__field-error-message"
        >Password contains parts of your name.</span
        >
      </mat-error>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Who do you want to help?</mat-label>
      <mat-select [formControl]="userToHelp">
        <mat-option>-- Clear --</mat-option>
        <mat-option *ngFor="let userToHelp of stubUserToHelp" [value]="userToHelp.id">{{userToHelp.name}}</mat-option>
      </mat-select>
      <mat-error *ngIf="userToHelp.hasError('required')">You must make a selection</mat-error>
    </mat-form-field>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="!signUpForm.valid"
    >
      Sign up
      <mat-icon *ngIf="isLoadingSignal()">
        <mat-spinner color="accent" diameter="20"> </mat-spinner>
      </mat-icon>
    </button>

    <button
      mat-raised-button
      color="secondary"
      type="button"
      [disabled]="!signUpForm.valid"
      (click)="saveUser()"
    >
      Next
    </button>
  </form>
</div>
